---
name: my-lb-app
description: "This stylebook defines an lbvserver config."
display-name: "LBVserver (HTTP) application"
namespace: com.acme.stylebooks
schema-version: "1.0"
version: "0.1"
import-stylebooks:
 -
  namespace: netscaler.nitro.config
  prefix: ns
  version: "10.5"
 -
  namespace: com.acme.stylebooks
  prefix: acme
  version: "0.1"

parameters-default-sources:
  - acme::simple-lbvserver

parameters:
 -
  name: serverip
  type: ipaddress

components:
 -
  name: my-lb-comp
  type: acme::simple-lbvserver
  properties:
   name: $parameters.name
   port: $parameters.port
   ip: $parameters.ip
 - 
  name: servicegroup-comp
  type: ns::servicegroup 
  properties: 
    servicegroupname: $parameters.name + "-svcgrp"
    servicetype: HTTP
 - 
  name: lbvserver-svg-binding
  type: ns::lbvserver_servicegroup_binding
  properties: 
    name: $components.my-lb-comp.outputs.lbvserver.properties.name
    servicegroupname: $components.servicegroup-comp.properties.servicegroupname
 - 
  name: svg-ip-members
  type: ns::servicegroup_servicegroupmember_binding
  properties: 
    ip: $parameters.serverip
    port: $parameters.port
    servicegroupname: $components.servicegroup-comp.properties.servicegroupname

